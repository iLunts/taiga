<div class="header">
  <div class="header__top">
    <div class="header__account">
      <tui-avatar
        class="tui-space_right-3"
        text="Роман Лунцевич"
        size="m"
        [rounded]="true"
      >
      </tui-avatar>
      <div class="header__account-name">
        <span class="tui-text_h6">ИП Лунцевич Р.В.</span>
        <span class="tui-text_body-s">УНП: 123 123 123</span>
      </div>
    </div>
    <div class="header__action">
      <div class="header__action-balance">
        <p class="tui-space_bottom-0 tui-space_top-0">Активный баланс:</p>
        <tui-money [value]="2750" [colored]="true" class="tui-text_h6">
        </tui-money>
      </div>
      <button
        class="tui-space_left-10"
        tuiIconButton
        size="m"
        icon="tuiIconPlusLarge"
        title="Add new invoice"
        shape="rounded"
        [routerLink]="[routing.admin.invoice.create]"
      ></button>
    </div>
  </div>
</div>

<!-- <ng-container *ngIf="invoices$ | async; let invoices">
  <tui-island *ngFor="let item of invoices" class="tui-space_bottom-2">
    <p class="tui-island__category">
      № {{ item?.number || 'Б.н.' }} от
        {{ item?.createDate | date: 'dd MMM yyyy' }}
    </p>
    <h3 class="tui-island__title">Some heading</h3>
    <p class="tui-island__paragraph">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed
      do eiusmod tempor incididunt ut labore et dolore magna
      aliqua.
    </p>
    <p class="tui-island__paragraph tui-island__paragraph_link">
      <a href="/" tuiLink>Link</a>
    </p>
  </tui-island>
</ng-container> -->

<ng-container *ngIf="invoices$ | async as invoices">
  <table tuiTable [columns]="columns">
    <thead>
      <tr tuiThGroup>
        <th *tuiHead="'number'" tuiTh [resizable]="true">Номер</th>
        <th *tuiHead="'unp'" tuiTh [resizable]="true">УНП</th>
        <th *tuiHead="'status'" tuiTh [resizable]="true">Статус</th>
        <th *tuiHead="'price'" tuiTh [resizable]="true">Сумма</th>
        <th *tuiHead="'action'" tuiTh [resizable]="true"></th>
        <!-- <th *tuiHead="'actions'" tuiTh [sorter]="null"></th> -->
      </tr>
    </thead>
    <tbody tuiTbody [data]="invoices">
      <tr *tuiRow="let item of invoices; let index = index" tuiTr>
        <td *tuiCell="'number'" tuiTd># {{ item?.number }}</td>
        <td *tuiCell="'unp'" tuiTd>
          {{ item?.contractor?.info?.unp }}
        </td>
        <td *tuiCell="'status'" tuiTd>
          {{ item?.status?.name }}
        </td>
        <td *tuiCell="'price'" tuiTd>
          {{ item?.total?.totalSum?.amount }}
        </td>
        <!-- <td *tuiCell="'email'" tuiTd>
            <a *ngIf="item.email" tuiLink [href]="'mailto:' + item.email">
                {{item.email}}
            </a>
        </td> -->
        <!-- <td *tuiCell="'status'" tuiTd>
            <div [class]="item.status">{{item.status}}</div>
        </td> -->
        <!-- <td *tuiCell="'tags'" tuiTd>
            <tui-tag
                *ngFor="let tag of item.tags"
                class="tui-space_right-1"
                [value]="tag"
                [autoColor]="true"
            ></tui-tag>
        </td> -->
        <td *tuiCell="'action'" tuiTd>
          <button
            tuiIconButton
            appearance="flat"
            size="s"
            icon="tuiIconDownload"
            title="Скачать PDF"
            shape="rounded"
            (click)="downloadPdf(item)"
          ></button>
          <button
            tuiIconButton
            appearance="flat"
            size="s"
            icon="tuiIconTrash"
            title="Удалить"
            shape="rounded"
            (click)="delete(item)"
          ></button>
          <tui-hosted-dropdown #dropdown [content]="content">
            <button
              tuiIconButton
              appearance="flat"
              size="s"
              icon="tuiIconMoreVer"
              type="button"
              shape="rounded"
              [pseudoHovered]="dropdown.open || null"
            ></button>
          </tui-hosted-dropdown>
          <ng-template #content let-activeZone>
            <tui-data-list
              tuiDataListDropdownManager
              [tuiActiveZoneParent]="activeZone"
            >
              <button
                tuiOption
                (click)="createBaseOnContract(item)"
                [disabled]="true"
              >
                Счёт
              </button>
              <button
                tuiOption
                (click)="createBaseOnAct(item)"
                [disabled]="true"
              >
                Акт
              </button>
              <button
                tuiOption
                (click)="createBaseOnReference(item)"
                [disabled]="true"
              >
                Справка
              </button>
            </tui-data-list>
          </ng-template>
        </td>
      </tr>
    </tbody>
  </table>
</ng-container>
