<app-header-create title="Создание акта"></app-header-create>

<form class="tui-container tui-container_adaptive" [formGroup]="form">
  <div class="tui-row tui-row_adaptive">
    <tui-input-number
      formControlName="number"
      class="tui-col_xs-2 tui-col_s-2 tui-col_sm-2 tui-col_md-2 tui-col_lg-2"
    >
      Номер акта
    </tui-input-number>

    <app-status-panel
      class="tui-col_xs-4 tui-col_s-4 tui-col_sm-4 tui-col_md-4"
      (selected)="setStatus($event)"
    ></app-status-panel>

    <tui-input-date
      class="tui-col_xs-3 tui-col_s-3 tui-col_sm-3 tui-col_md-3 tui-col_lg-3"
      tuiUnfinishedValidator="Finish filling the field"
      formControlName="date"
      tuiHintContent="Дата автоматически заполняется из списка услуг"
    >
      Дата акта
    </tui-input-date>

    <qrcode
      #qrBlock
      class="tui-col_xs-2 tui-col_s-2 tui-col_sm-2 tui-col_md-2 tui-col_lg-2"
      [qrdata]="act?._id"
      [width]="60"
      [errorCorrectionLevel]="'H'"
      [elementType]="'img'"
    ></qrcode>
  </div>

  <div class="tui-row tui-row_adaptive tui-space_top-5">
    <div
      class="tui-col_xs-12 tui-col_s-1 tui-col_sm-1 tui-col_md-9 tui-col_lg-9"
    ></div>
    <div
      class="tui-col_xs-12 tui-col_s-1 tui-col_sm-1 tui-col_md-3 tui-col_lg-3"
    ></div>
  </div>

  <div class="tui-row tui-row_adaptive">
    <div
      class="tui-col_xs-12 tui-col_s-1 tui-col_sm-1 tui-col_md-6 tui-col_lg-6"
    >
      <h5>Арендодатель</h5>
      <app-company-panel
        *ngIf="act.profileCompany"
        [data]="act.profileCompany"
        [isLoaded]="true"
        [canChange]="false"
      ></app-company-panel>
    </div>
    <div
      class="tui-col_xs-12 tui-col_s-1 tui-col_sm-1 tui-col_md-6 tui-col_lg-6"
    >
      <h5>Арендатор</h5>
      <app-contractor-panel
        [contractor]="form.controls.contractor.value"
        (selected)="setContractor($event)"
      ></app-contractor-panel>
    </div>
  </div>

  <div class="tui-row tui-row_adaptive tui-space_top-8">
    <div
      class="
        tui-col_xs-12 tui-col_s-12 tui-col_sm-12 tui-col_md-12 tui-col_lg-12
      "
    >
      <div class="tui-form__row">
        <div class="tui-form__field">
          <app-service-table
            [services]="form.controls.services.value"
            (selected)="setService($event)"
          ></app-service-table>
        </div>
      </div>
    </div>
  </div>

  <div class="tui-row tui-row_adaptive tui-space_top-10">
    <div
      class="
        tui-col_xs-12 tui-col_s-12 tui-col_sm-12 tui-col_md-12 tui-col_lg-12
      "
    >
      <button
        tuiButton
        type="button"
        class="tui-space_right-3 tui-space_bottom-3"
        appearance="outline"
        (click)="cancel()"
      >
        Отменить
      </button>
      <button
        tuiButton
        type="button"
        class="tui-space_right-3 tui-space_bottom-3"
        (click)="save()"
        [disabled]="!isActValid"
      >
        Создать
      </button>
    </div>
  </div>
</form>
